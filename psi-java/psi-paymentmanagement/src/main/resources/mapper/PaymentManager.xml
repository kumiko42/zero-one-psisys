<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.zeroone.star.paymentmanagement.mapper.PaymentManagerMapper">

    <resultMap id="resultMap" type="com.zeroone.star.project.vo.paymentManager.ChosenExportVo">
        <result column="id" property=""/>
        <result column="bill_no" property="billNo"/>
        <result column="bill_date" property="billDate"/>
        <result column="src_bill_type" property="srcBillType"/>
        <result column="src_bill_id" property=""/>
        <result column="src_no" property=""/>
        <result column="subject" property="subject"/>
        <result column="is_rubric" property="isRubric"/>
        <result column="payment_type" property=""/>
        <result column="supplier_id" property="supplierId"/>
        <result column="op_dept" property=""/>
        <result column="operator" property=""/>
        <result column="amt" property="amt"/>
        <result column="paid_amt" property=""/>
        <result column="attachment" property=""/>
        <result column="remark" property="remark"/>
        <result column="is_auto" property="isAuto"/>
        <result column="bill_stage" property="billStage"/>
        <result column="approver" property="approver"/>
        <result column="bpmi_instance_id" property=""/>
        <result column="approval_result_type" property=""/>
        <result column="approval_remark" property=""/>
        <result column="is_effective" property="isEffective"/>
        <result column="effective_time" property="effectiveTime"/>
        <result column="is_closed" property="isClosed"/>
        <result column="is_voided" property="isVoided"/>
        <result column="sys_org_code" property="sysOrgCode"/>
        <result column="create_by" property="createBy"/>
        <result column="create_time" property=""/>
        <result column="update_by" property="updateBy"/>
        <result column="update_time" property="updateTime"/>
        <result column="version" property=""/>
        <result column="id" property=""/>
        <result column="mid" property=""/>
        <result column="bill_no" property=""/>
        <result column="entry_no" property="entryNo"/>
        <result column="src_bill_type" property=""/>
        <result column="src_bill_id" property="srcBillId"/>
        <result column="src_entry_id" property="srcEntryId"/>
        <result column="src_no" property="srcNo"/>
        <result column="settle_method" property="settleMethod"/>
        <result column="bank_account_id" property="bankAccountId"/>
        <result column="amt" property=""/>
        <result column="remark" property=""/>
        <result column="custom1" property="custom1"/>
        <result column="custom2" property="custom2"/>
        <result column="version" property=""/>
    </resultMap>

    <select id="chosenExport" parameterType="resultMap">
        select * from fin_payment_req a left join fin_payment_entry e
        on a.bill_no = e.bill_no
        where a.bill_no in
        <foreach collection="dto" item="id" open="(" close=")" separator="," index="">

            #{id}

        </foreach>
    </select>
    <update id="updateBillStage" parameterType="com.zeroone.star.project.dto.paymentManager.UpdateBillStageDto" >
        update fin_payment set bill_stage=#{billStage} where id=#{id};
    </update>

    <insert id="insertList" parameterType="com.zeroone.star.paymentmanagement.entity.FinPayment">
        insert into fin_payment(`bill_no`,`bill_date`,`src_bill_type`,`src_bill_id`,`sec_no`,`subject`,`is_rubric`,`payment_type`,
        `supplier_id`,`amt`,`checked_amt`,`attachment`,`remark`,`is_auto`,`bill_stage`,`approver`,`bpmi_instance_id`,`approval_result_type`,
        `approval_remark`, `is_effective`,`effective_time`,`is_closed`,`is_voided`,`create_time`,`create_by`,`sys_org_code`,`update_time`,
        `update_by`,`version`
        )values
        <foreach collection="list" item="item" separator=",">
            (
                #{item.billNo},
                #{item.billDate},
            #{item.srcBillType},
            #{item.srcBillId},
            #{item.secNo},
            #{item.subject},
            #{item.isRubric},
            #{item.paymentType},
            #{item.supplierId},
            #{item.amt},
            #{item.checkedAmt},
            #{item.attachment},
            #{item.remark},
            #{item.isAuto},
            #{item.billStage},
            #{item.approver},
            #{item.bpmiInstanceId},
            #{item.approvalResultType},
            #{item.approvalRemark},
            #{item.isEffective},
            #{item.effectiveTime},
            #{item.isClosed},
            #{item.isVoided},
            #{item.createTime},
            #{item.createBy},
            #{item.sysOrgCode},
            #{item.updateTime},
            #{item.updateBy},
            #{item.version}
            )
        </foreach>

    </insert>
</mapper>
